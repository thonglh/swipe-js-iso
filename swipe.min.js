!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():a.Swipe=b()}(this,function(){"use strict";return function(a,b){function c(a,b){var c=[].slice.call(arguments,2);return function(){b&&b.apply(a,c)}}function d(a,b,d,e){p(c(this,j,a,b,d,e))}function e(){r=v.children,u=r.length,B=r.length<2?!1:b.continuous,q.transitions&&B&&r.length<3&&(v.appendChild(r[0].cloneNode(!0)),v.appendChild(r[1].cloneNode(!0)),r=v.children),s=new Array(r.length),t=Math.round(a.getBoundingClientRect().width||a.offsetWidth),v.style.width=r.length*t+"px";for(var c=r.length;c--;){var e=r[c];if(e.style.width=t+"px",e.setAttribute("data-index",c),q.transitions){e.style.left=c*-t+"px";var f=c===z&&z===y;d(c,z>c?-t:c>z?t:0,0,f)}}B&&q.transitions&&(d(h(z-1),-t,0),d(h(z+1),t,0)),q.transitions||(v.style.left=z*-t+"px"),a.style.visibility="visible"}function f(){B?i(z-1):z&&i(z-1)}function g(){B?i(z+1):z<r.length-1&&i(z+1)}function h(a){return(r.length+a%r.length)%r.length}function i(a,d){if(z!=a){if(q.transitions){var e=Math.abs(z-a)/(z-a);if(B){var f=e;e=-s[h(a)]/t,e!==f&&(a=-e*r.length+a)}for(var g=Math.abs(z-a)-1;g--;)j(h((a>z?a:z)-g-1),t*e,0);a=h(a),j(z,t*e,d||A),j(a,0,d||A),B&&j(h(a-e),-(t*e),0)}else a=h(a),l(z*-t,a*-t,d||A);z=a,b.callback&&p(c(null,b.callback,z,r[z]))}}function j(a,b,c,d){k(a,b,c,d),s[a]=b}function k(a,b,c,d){var e=r[a],f=e&&e.style;f&&(f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=c+"ms",f.webkitTransform="translate("+b+"px,0)"+(d?"":"translateZ(0)"),f.msTransform=f.MozTransform=f.OTransform="translateX("+b+"px)")}function l(a,c,d){if(!d)return void(v.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(v.style.left=c+"px",C&&m(),b.transitionEnd&&b.transitionEnd.call(event,z,r[z]),void clearInterval(f)):void(v.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function m(){clearTimeout(w),w=setTimeout(g,C)}function n(){C=0,clearTimeout(w)}var o=function(){},p=function(a){setTimeout(a||o,0)},q={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var r,s,t,u,v=a.children[0];b=b||{};var w,x,y=parseInt(b.startSlide,10)||0,z=y,A=b.speed||300,B=b.continuous=void 0!==b.continuous?b.continuous:!0,C=b.auto||0,D={},E={},F={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":p(c(this,this.end,a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":p(c(this,this.transitionEnd,a));break;case"resize":p(e)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];D={x:b.pageX,y:b.pageY,time:+new Date},x=void 0,E={},v.addEventListener("touchmove",this,!1),v.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale||b.disableScroll)){var c=a.touches[0];E={x:c.pageX-D.x,y:c.pageY-D.y},"undefined"==typeof x&&(x=!!(x||Math.abs(E.x)<Math.abs(E.y))),x||(a.preventDefault(),n(),B?(k(h(z-1),E.x+s[h(z-1)],0),k(z,E.x+s[z],0),k(h(z+1),E.x+s[h(z+1)],0)):(E.x=E.x/(!z&&E.x>0||z==r.length-1&&E.x<0?Math.abs(E.x)/t+1:1),k(z-1,E.x+s[z-1],0),k(z,E.x+s[z],0),k(z+1,E.x+s[z+1],0)),b.swiping&&b.swiping(-E.x/t))}},end:function(a){var c=+new Date-D.time,d=Number(c)<250&&Math.abs(E.x)>20||Math.abs(E.x)>t/2,e=!z&&E.x>0||z==r.length-1&&E.x<0;B&&(e=!1);var f=E.x<0;x||(d&&!e?(f?(B?(j(h(z-1),-t,0),j(h(z+2),t,0)):j(z-1,-t,0),j(z,s[z]-t,A),j(h(z+1),s[h(z+1)]-t,A),z=h(z+1)):(B?(j(h(z+1),t,0),j(h(z-2),-t,0)):j(z+1,t,0),j(z,s[z]+t,A),j(h(z-1),s[h(z-1)]+t,A),z=h(z-1)),b.callback&&b.callback(z,r[z])):B?(j(h(z-1),-t,A),j(z,0,A),j(h(z+1),t,A)):(j(z-1,-t,A),j(z,0,A),j(z+1,t,A))),v.removeEventListener("touchmove",F,!1),v.removeEventListener("touchend",F,!1),v.removeEventListener("touchforcechange",function(){},!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==z&&(C&&m(),b.transitionEnd&&b.transitionEnd.call(a,z,r[z]))}};return e(),C&&m(),q.addEventListener?(q.touch&&(v.addEventListener("touchstart",F,!1),v.addEventListener("touchforcechange",function(){},!1)),q.transitions&&(v.addEventListener("webkitTransitionEnd",F,!1),v.addEventListener("msTransitionEnd",F,!1),v.addEventListener("oTransitionEnd",F,!1),v.addEventListener("otransitionend",F,!1),v.addEventListener("transitionend",F,!1)),window.addEventListener("resize",F,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(a,b){n(),i(a,b)},prev:function(){n(),f()},next:function(){n(),g()},stop:function(){n()},getPos:function(){return z},getNumSlides:function(){return u},kill:function(){n(),v.style.width="",v.style.left="";for(var a=r.length;a--;){var b=r[a];b.style.width="",b.style.left="",q.transitions&&k(a,0,0)}q.addEventListener?(v.removeEventListener("touchstart",F,!1),v.removeEventListener("webkitTransitionEnd",F,!1),v.removeEventListener("msTransitionEnd",F,!1),v.removeEventListener("oTransitionEnd",F,!1),v.removeEventListener("otransitionend",F,!1),v.removeEventListener("transitionend",F,!1),window.removeEventListener("resize",F,!1)):window.onresize=null}}}}});